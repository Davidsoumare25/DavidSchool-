<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Espace √âl√®ves</title>

<style>
*{box-sizing:border-box;font-family:Arial}
body{margin:0;background:#f4f6fb}

/* ===== HEADER ===== */
header{
  background:#1e3a8a;
  color:white;
  padding:15px;
  text-align:center;
}

/* ===== SECTIONS ===== */
.section{display:none;padding:15px}
.section.active{display:block}

/* ===== CARTES ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:12px;
}
.card{
  padding:20px;
  border-radius:12px;
  color:white;
  text-align:center;
  font-weight:bold;
  cursor:pointer;
  transition:.2s;
}
.card:hover{transform:scale(1.05)}

/* Classes */
.c3e{background:#16a34a}
.c4e{background:#2563eb}
.c5e{background:#9333ea}

/* Mati√®res */
.math{background:#f59e0b}
.pc{background:#ef4444}
.svt{background:#10b981}

/* ===== BOUTONS ===== */
button{
  padding:12px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:bold;
}
.back{background:#334155;color:white;margin-bottom:10px}

/* ===== LISTE ===== */
.item{
  background:white;
  padding:10px;
  border-radius:8px;
  margin-bottom:8px;
}

/* ===== ADMIN ===== */
#adminModal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.5);
  display:none;
  align-items:center;
  justify-content:center;
  pointer-events:none;
}
#adminModal.active{pointer-events:auto; display:flex}
.adminBox{
  background:white;
  padding:20px;
  width:90%;
  max-width:400px;
  border-radius:12px;
}
</style>
</head>

<body>

<header>
  üìò Plateforme scolaire
  <button onclick="openAdmin()" style="float:right">Admin</button>
</header>

<!-- ===== CLASSES ===== -->
<div id="classes" class="section active">
  <h3>Choisis ta classe</h3>
  <div class="grid">
    <div class="card c3e" onclick="openMatieres('3e')">3e</div>
    <div class="card c4e" onclick="openMatieres('4e')">4e</div>
    <div class="card c5e" onclick="openMatieres('5e')">5e</div>
  </div>
</div>

<!-- ===== MATI√àRES ===== -->
<div id="matieres" class="section">
  <button class="back" onclick="goBack('classes')">‚¨Ö Retour</button>
  <h3 id="classeTitre"></h3>
  <div class="grid" id="matieresList"></div>
</div>

<!-- ===== CONTENU ===== -->
<div id="contenu" class="section">
  <button class="back" onclick="goBack('matieres')">‚¨Ö Retour</button>
  <h3 id="contenuTitre"></h3>
  <div class="columns" style="display:flex; gap:15px; flex-wrap:wrap">
    <div class="column" style="flex:1; min-width:200px">
      <h3>‚úèÔ∏è Exercices</h3>
      <div id="exercicesList"></div>
    </div>
    <div class="column" style="flex:1; min-width:200px">
      <h3>üìò Le√ßons</h3>
      <div id="leconsList"></div>
    </div>
  </div>
</div>

<!-- ===== ADMIN ===== -->
<div id="adminModal">
  <div class="adminBox">
    <h3>Admin</h3>

    <select id="aClasse">
      <option>3e</option>
      <option>4e</option>
      <option>5e</option>
    </select>

    <p>Mati√®res (choix optionnel)</p>
    <label><input type="checkbox" value="Maths"> Maths</label><br>
    <label><input type="checkbox" value="PC"> Physique</label><br>
    <label><input type="checkbox" value="SVT"> SVT</label><br>

    <select id="aType">
      <option value="lecons">Le√ßon</option>
      <option value="exercices">Exercice</option>
    </select>

    <input id="aTitre" placeholder="Titre">
    <button onclick="addContent()">Ajouter</button>
    <button onclick="closeAdmin()">Fermer</button>
  </div>
</div>

<script>
let data = {};
let currentClasse, currentMatiere;

// Afficher une section
function show(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// Classes ‚Üí Mati√®res
function openMatieres(classe){
  currentClasse = classe;
  document.getElementById("classeTitre").innerText = "Classe " + classe;
  let m = document.getElementById("matieresList");
  m.innerHTML = `
    <div class="card math" onclick="openContenu('Maths')">Maths</div>
    <div class="card pc" onclick="openContenu('PC')">Physique</div>
    <div class="card svt" onclick="openContenu('SVT')">SVT</div>
  `;
  show('matieres');
}

// Mati√®re ‚Üí Contenu
function openContenu(mat){
  currentMatiere = mat;
  document.getElementById("contenuTitre").innerText = currentClasse + " - " + mat;
  updateContenu();
  show('contenu');
}

// Mettre √† jour les colonnes Exercices / Le√ßons
function updateContenu(){
  let exercices = document.getElementById("exercicesList");
  let lecons = document.getElementById("leconsList");
  exercices.innerHTML = "";
  lecons.innerHTML = "";

  ["exercices","lecons"].forEach(type=>{
    let key = currentClasse + currentMatiere + type;
    (data[key]||[]).forEach(titre=>{
      let div = document.createElement("div");
      div.className="item";
      div.innerText = titre;
      if(type==="exercices") exercices.appendChild(div);
      else lecons.appendChild(div);
    });
  });
}

function goBack(id){show(id)}

/* ===== ADMIN ===== */
function openAdmin(){
  document.getElementById("adminModal").classList.add("active");
}
function closeAdmin(){
  document.getElementById("adminModal").classList.remove("active");
}

function addContent(){
  let classe = document.getElementById("aClasse").value;
  let type = document.getElementById("aType").value;
  let titre = document.getElementById("aTitre").value;

  document.querySelectorAll('input[type=checkbox]:checked').forEach(cb=>{
    let key = classe + cb.value + type;
    if(!data[key]) data[key]=[];
    data[key].push(titre);

    // Si la classe et mati√®re ouverte ‚Üí mise √† jour imm√©diate
    if(classe===currentClasse && cb.value===currentMatiere){
      updateContenu();
    }
  });

  alert("Ajout√© !");
}
</script>

</body>
</html>
